package api;

import static org.junit.Assert.*;

import java.util.HashMap;
import java.util.Map;
import java.util.Random;

import org.junit.Test;

public class TestCrudAction {
	private final String TOKEN = "0e2c19917d53f7aff9ea081922569f3c8322c131d1675556641b5de5a9ce88e5";
	private final String pageUrl = "https://gorest.co.in/";

	@Test
	public void createNewUser() {

		String userName = "UserName";
		String userEmail = "useremail_" + new Random().nextInt(10000) + "@email.com";

		String endpointPostUser = "public-api/users";
		
		Map user = new HashMap<>();
		user.put("name", userName);
		user.put("email", userEmail);
		
		// POST - create user
		int userID = given(). 
			auth().  
			oauth2(TOKEN). 
			contentType(ContentType.JSON). 
			body(user).  
			log().all().
		when().
			post(pageUrl + endpointPostUser). 
		then(). 
			assertThat().   
			body("code", is(201)). 
			log().all().extract().
			path("data.id");
	}

}
